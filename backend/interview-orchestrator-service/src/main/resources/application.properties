# =========================================
# SERVER
# =========================================
server.port=8081

# HTTPS/SSL Configuration for Development
server.ssl.enabled=true
server.ssl.key-store=../ssl-certs/aria-dev-keystore.p12
server.ssl.key-store-password=devpassword
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=aria-dev
server.ssl.key-password=devpassword
# Trust all certificates for development (not for production!)
server.ssl.trust-store=../ssl-certs/aria-dev-keystore.p12
server.ssl.trust-store-password=devpassword

# =========================================
# MYSQL DATABASE
# =========================================
spring.datasource.url=jdbc:mysql://localhost:3306/interview_orchestrator_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=America/Los_Angeles
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=interview_mgmt
spring.datasource.password=CoolLife@2025

# JPA
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# =========================================
# FLYWAY MIGRATIONS - DISABLED BY DEFAULT
# =========================================
# Flyway disabled in base config - enabled only in specific profiles
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=true

# =========================================
# REDIS CONFIGURATION
# =========================================
# Enable Redis for session state management
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.timeout=2000ms
spring.redis.database=1
spring.redis.lettuce.pool.max-active=10
spring.redis.lettuce.pool.max-idle=10
spring.redis.lettuce.pool.min-idle=1

# =========================================
# EXTERNAL SERVICES
# =========================================
# AI Analytics Service (FastAPI) - SSL enabled on port 8003
app.services.ai-analytics.url=https://localhost:8003
app.services.ai-analytics.timeout=30s

# Adaptive Question Engine (FastAPI) - SSL enabled on port 8001
app.services.question-engine.url=https://localhost:8001
app.services.question-engine.timeout=15s

# Speech & Transcript Service (FastAPI) - SSL enabled on port 8002
app.services.transcript.url=https://localhost:8002
app.services.transcript.websocket.url=wss://localhost:8002

# User Management Service (Spring Boot)
app.services.user-management.url=https://localhost:8080

# Mozilla TTS Service (FastAPI) - SSL enabled on port 8004
app.services.mozilla-tts.url=https://localhost:8004
app.services.mozilla-tts.timeout=20s

# Job Description Analyzer (FastAPI) - SSL enabled on port 8005
app.services.job-analyzer.url=https://localhost:8005
app.services.job-analyzer.timeout=30s

# AI Avatar Service (FastAPI) - SSL enabled on port 8006
app.services.ai-avatar.url=https://localhost:8006
app.services.ai-avatar.timeout=15s

# Voice Synthesis Service (FastAPI) - SSL enabled on port 8007
app.services.voice-synthesis.url=https://localhost:8007
app.services.voice-synthesis.timeout=20s

# Voice Isolation Service (FastAPI) - SSL enabled on port 8008
app.services.voice-isolation.url=https://localhost:8008
app.services.voice-isolation.timeout=15s

# =========================================
# WEBRTC CONFIGURATION
# =========================================
# Daily.co configuration
app.webrtc.daily.api-key=${DAILY_API_KEY:128ca969d5ff50682c33d3b4e2f3d0f844bd035ecba65ed51371b0e190d56500}
app.webrtc.daily.domain=${DAILY_DOMAIN:ariaa.daily.co}
app.webrtc.session.timeout=7200
app.webrtc.ice-servers[0]=stun:stun.l.google.com:19302
app.webrtc.ice-servers[1]=turn:relay1.daily.co:3478
app.webrtc.ice-servers[2]=turn:relay1.daily.co:443

# =========================================
# INTERVIEW CONFIGURATION
# =========================================
# IRT Parameters
app.interview.irt.initial-theta=0.0
app.interview.irt.initial-standard-error=1.0
app.interview.irt.confidence-threshold=0.3
app.interview.irt.min-questions=10
app.interview.irt.max-questions=30

# Interview Session Management
app.interview.session.max-duration-minutes=120
app.interview.session.idle-timeout-minutes=15
app.interview.session.auto-save-interval-seconds=30

# =========================================
# WEBSOCKET CONFIGURATION
# =========================================
app.websocket.allowed-origins=http://localhost:4200,https://localhost:4200
app.websocket.session-timeout=1800000
app.websocket.heartbeat-interval=30000

# =========================================
# TIMEZONE CONFIGURATION
# =========================================
# Set Spring Boot to use system timezone (matches frontend)
spring.jackson.time-zone=America/Los_Angeles
spring.jpa.properties.hibernate.jdbc.time_zone=America/Los_Angeles

# =========================================
# LOGGING
# =========================================
logging.level.org.springframework=INFO
logging.level.com.company=DEBUG
logging.level.org.flywaydb=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =========================================
# ACTUATOR (Health Checks)
# =========================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# =========================================
# SECURITY (JWT Integration with User Management)
# =========================================
app.jwt.secret=kV7pL9zR3mX1tU5qW8bC2yJ6fH4nE0sDmA3gK9xZ2vF8uQ4tY7rP1wE6iO5sL0hN
app.jwt.expiry-ms=3600000
