# =========================================
# MONGODB ATLAS PROFILE - USER MANAGEMENT SERVICE
# =========================================

# SERVER
server.port=${USER_MGMT_PORT:8080}
server.servlet.context-path=/api/auth

# MONGODB ATLAS DATABASE CONFIGURATION
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://workwithrvprajwal:cUxWuFimD3KwWDPh@aria-cluster.22trjtp.mongodb.net/?retryWrites=true&w=majority&appName=aria-cluster}
spring.data.mongodb.database=${MONGODB_DATABASE:aria}

# MongoDB Connection Settings
spring.data.mongodb.repositories.enabled=true
spring.data.mongodb.auto-index-creation=true

# Connection Pool Settings for MongoDB Atlas
spring.data.mongodb.options.connections-per-host=10
spring.data.mongodb.options.min-connections-per-host=2
spring.data.mongodb.options.max-wait-time=5000
spring.data.mongodb.options.connect-timeout=10000
spring.data.mongodb.options.socket-timeout=0
spring.data.mongodb.options.ssl-enabled=true

# UPSTASH REDIS CONFIGURATION
spring.redis.url=${UPSTASH_REDIS_REST_URL:redis://renewing-falcon-41265.upstash.io:6379}
spring.redis.password=${UPSTASH_REDIS_REST_TOKEN:AaExAAIncDE3NTczYWIxNDNjYjA0NzI2YWQ2NmY0ZTZjZTg5Y2IyMXAxNDEyNjU}
spring.redis.timeout=2000ms
spring.redis.database=0
spring.redis.lettuce.pool.max-active=8
spring.redis.lettuce.pool.max-idle=8
spring.redis.lettuce.pool.min-idle=2

# DISABLE RELATIONAL DATABASE FOR MONGODB PROFILE
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# JWT CONFIG
app.jwt.secret=${JWT_SECRET:kV7pL9zR3mX1tU5qW8bC2yJ6fH4nE0sDmA3gK9xZ2vF8uQ4tY7rP1wE6iO5sL0hN}
app.jwt.expiry-ms=${JWT_EXPIRY_MS:3600000}
app.jwt.refresh-expiry-ms=${JWT_REFRESH_EXPIRY_MS:604800000}
app.jwt.issuer=${JWT_ISSUER:ARIA-MongoDB}

# MAIL CONFIGURATION
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:workwithrvprajwal@gmail.com}
spring.mail.password=${SMTP_PASSWORD:vclhowpwtmopdqdz}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8

# MULTIPART FILE UPLOAD
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:5MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:10MB}
spring.servlet.multipart.enabled=true

# LOGGING - INFO LEVEL FOR MONGODB
logging.level.org.springframework=INFO
logging.level.com.company=INFO
logging.level.root=WARN
logging.level.org.springframework.data.mongodb=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# SECURITY HEADERS
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# ACTUATOR
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
management.security.enabled=true

# CORS
app.cors.allowed-origins=${CORS_ORIGINS:https://aria-frontend.onrender.com}
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true
